<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>XREX Pay · Settings</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="icon" href="assets/favicons/xrex-favicon-16x16.png" sizes="16x16" type="image/png">
    <link href="https://fonts.googleapis.com/css2?family=Sora:wght@400;600;700&family=Manrope:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles/styles.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css">
</head>
<body>
    <header class="app-header">
        <div class="header-inner">
            <a class="brand" href="index.html"><img src="assets/logo_xrexpay.svg" alt="XREX Pay"></a>
            
            <div class="header-actions">

                <a class="circle-icon" href="https://intercom.help/xrex-sg/en/" target="_blank" rel="noopener noreferrer" title="Support">
                    <img src="assets/icon_support.svg" alt="support" width="18" height="18">
                </a>
                <a class="account-chip" id="accountChipLink" href="settings.html?view=content&page=account" aria-label="Account settings">
                    <div class="chip-avatar"><img src="assets/logo_agp.svg" alt="AGP"></div>
                    <div class="chip-name">AGP Technology</div>
                    <img class="chevron" src="assets/icon_chevron_right.svg" alt="more" width="20" height="20">
                </a>
            </div>
        </div>
    </header>

    <main class="container">
        <div class="mobile-menu-header">
            <a href="index.html" class="link-close-menu" id="closeMenuLink" aria-label="Close menu">
                <img src="assets/icon_close.svg" alt="Close" width="20" height="20">
                <span>Close menu</span>
            </a>
        </div>
        <aside class="sidebar">
            <nav class="menu">
                <div class="menu-item" data-link="settings.html?view=content&page=account" data-page="account" role="link" tabindex="0">
                    <div class="menu-item-icon">
                        <img src="assets/icon_user.svg"
                             alt="Account"
                             width="20"
                             height="20"
                             data-icon-active="assets/icon_user_active.svg"
                             data-icon-inactive="assets/icon_user.svg">
                    </div>
                    <div>Account</div>
                </div>
                <div class="menu-item">
                    <div class="menu-item-icon">
                        <img src="assets/icon_trade.svg" alt="Limits" width="20" height="20">
                    </div>
                    <div>Limits</div>
                </div>
                <div class="menu-item">
                    <div class="menu-item-icon">
                        <img src="assets/icon_bank.svg" alt="Bank" width="20" height="20">
                    </div>
                    <div class="menu-title">Custodian &amp; Bank</div>
                    <button class="menu-chevron" aria-label="Toggle" aria-expanded="false" data-target="#submenu-bank">
                        <img src="assets/icon_chevron_down.svg" alt="expand" width="20" height="20">
                    </button>
                </div>
                <div class="submenu" id="submenu-bank" hidden>
                    <a class="submenu-item" href="#">• USD bank accounts</a>
                </div>
                <div class="menu-item">
                    <div class="menu-item-icon">
                        <img src="assets/icon_blockchain.svg" alt="Address book" width="20" height="20">
                    </div>
                    <div class="menu-title">Address book</div>
                    <button class="menu-chevron" aria-label="Toggle" aria-expanded="false" data-target="#submenu-address">
                        <img src="assets/icon_chevron_down.svg" alt="expand" width="20" height="20">
                    </button>
                </div>
                <div class="submenu" id="submenu-address" hidden>
                    <a class="submenu-item" href="#">• USDT addresses</a>
                </div>
                <div class="menu-item">
                    <div class="menu-item-icon">
                        <img src="assets/icon_statements.svg" alt="Statements" width="20" height="20">
                    </div>
                    <div class="menu-title">Statements</div>
                    <button class="menu-chevron" aria-label="Toggle" aria-expanded="false" data-target="#submenu-statements">
                        <img src="assets/icon_chevron_down.svg" alt="expand" width="20" height="20">
                    </button>
                </div>
                <div class="submenu" id="submenu-statements" hidden>
                    <a class="submenu-item" href="#">• Monthly statement</a>
                    <a class="submenu-item" href="#">• Customised statement</a>
                </div>
                <div class="menu-item active" data-link="settings.html?view=content&page=telegram" data-page="telegram" role="link" tabindex="0">
                    <div class="menu-item-icon">
                        <img src="assets/icon_tgbot_telegram.svg"
                             alt="Telegram bot"
                             width="20"
                             height="20"
                             data-icon-active="assets/icon_tgbot_telegram_active.svg"
                             data-icon-inactive="assets/icon_tgbot_telegram.svg">
                    </div>
                    <div>Telegram bot</div>
                </div>
            </nav>
        </aside>

        <section class="content">
            <div class="mobile-back">
                <a href="#" class="link-back" id="backLink" aria-label="Back">
                    <svg class="icon-back" width="16" height="16" viewBox="0 0 25 25" aria-hidden="true" focusable="false">
                        <path d="M15.7,16.3l-4.2-4.2,4.2-4.2c.4-.4.4-1.1,0-1.5-.4-.4-1.1-.4-1.5,0l-5.1,5.1c-.3.3-.3.9,0,1.2l5.1,5.1c.4.4,1.1.4,1.5,0,.4-.4.4-1.1,0-1.5Z" fill="currentColor"/>
                    </svg>
                    <span>Menu</span>
                </a>
            </div>
            <div class="content-header">
                <h1 id="pageTitle">Telegram Bot</h1>
                <div class="content-header-actions">
                    <button class="btn btn-secondary btn-sm" id="shareBtn">
                        <img src="assets/icon_share.svg" alt="share" width="14" height="14">
                        <span>Share</span>
                    </button>
                    <button class="btn btn-secondary btn-sm" id="helpBtn">
                        <img src="assets/icon_help.svg" alt="help" width="14" height="14">
                        <span>Help</span>
                    </button>
                </div>
            </div>

            <!-- Telegram bot main row: bot card + connector + linked account card (desktop) -->
            <div class="bot-row">
                <div class="bot-card" id="botCard">
                    <div class="bot-card-main">
                        <div class="bot-card-left">
                            <div class="bot-card-avatar">
                                <img src="assets/bot_avatar.png" alt="XREX Pay Bot avatar" width="40" height="40">
                            </div>
                            <div class="bot-card-texts">
                                <div class="bot-card-title">XREX Pay Bot</div>
                                <a href="#" class="bot-card-handle" id="botHandleLink">@SanneXREX_bot</a>
                            </div>
                        </div>
                        <div class="bot-card-right">
                            <div class="bot-card-status" id="botCardStatus">
                                <div class="status-row" id="statusRow" style="display:none;">
                                    <div class="status-line">
                                        <span class="status-value">Not linked</span>
                                        <span class="status-tip-wrap">
                                            <button class="status-info-btn" id="statusInfoBtn" aria-expanded="false" aria-controls="statusTip" type="button">
                                                <img id="statusInfoIcon" src="assets/icon_info_unlinked.svg" width="16" height="16" alt="info">
                                            </button>
                                            <div class="status-tooltip below" id="statusTip" role="tooltip" hidden>
                                                <div class="tip-title">Not linked to bot</div>
                                                <div class="tip-body">Link your Telegram account to the bot and access XREX features directly in Telegram</div>
                                            </div>
                                        </span>
                                        <span class="status-subline"><span class="status-meta"></span></span>
                                    </div>
                                </div>
                            </div>
                            <button class="btn btn-primary btn-md mobile-btn-sm js-start-link" id="botCardCta">Link now</button>
                        </div>
                    </div>
                </div>
                <div class="bot-row-connector" aria-hidden="true">
                    <picture>
                        <!-- Mobile / below desktop: vertical connector -->
                        <source srcset="assets/line_connect_vertical.svg" media="(max-width: 1279px)">
                        <!-- Desktop: horizontal connector -->
                        <img src="assets/line_connect.svg" alt="" width="16" height="156">
                    </picture>
                </div>
                <div class="la-divider" role="separator"></div>
                <div id="linkedAccountSection" class="linked-account" hidden>
                    <div class="la-card">
                        <div class="la-header-row">
                            <div class="la-header-sm">Telegram account linked to bot</div>
                            <div class="la-header-date" id="linkedDateLabel">--</div>
                        </div>
                        <div class="la-top">
                            <div class="la-avatar">
                                <img class="la-avatar-phimg" src="assets/icon_tguser.svg" alt="no avatar" width="24" height="24">
                                <img class="la-avatar-img" alt="avatar" hidden>
                            </div>
                            <div class="la-id">
                                <div class="la-name">Telegram user</div>
                                <div class="la-username">- -</div>
                                <div class="la-tgid" id="linkedTgValue">Telegram ID: 736135332</div>
                            </div>
                        </div>
                    </div>
                    <div class="la-actions">
                        <button class="la-action" type="button" id="laSendTest">
                            <img src="assets/icon_linked_sendtestmessage.svg" alt="" width="16" height="16">
                            <span>Test message</span>
                        </button>
                        <button class="la-action" type="button" id="laUnlinkBtn">
                            <img src="assets/icon_linked_unlink.svg" alt="" width="16" height="16">
                            <span>Unlink</span>
                        </button>
                    </div>
                </div>
            </div>

            <div class="tabs" id="tabs" role="tablist" style="display:none;">
                <button class="tab active" role="tab" aria-selected="true" id="tab-intro">Introduction</button>
                <button class="tab" role="tab" aria-selected="false" id="tab-setup">Setup</button>
            </div>

            <div id="panel-account" class="account-panel" role="tabpanel" aria-label="Account">
                <div class="acct-status-line">
                    <span class="acct-status-label">Account status :</span>
                    <span class="acct-status-value verified">Verified</span>
                </div>

                <h3 class="section-heading">Information</h3>
                <div class="field-row card editable name-card">
                    <div class="avatar">
                        <img src="assets/logo_agp.svg" alt="AGP" width="60" height="60">
                    </div>
                    <div class="name-block">
                        <div class="name">AGP Technology</div>
                        <div class="caption">@AGPTECH</div>
                    </div>
                    <button class="icon-btn" aria-label="Edit profile"><img src="assets/icon_pencil.svg" width="20" height="20" alt="edit"></button>
                </div>

                <div class="grid-2">
                    <div class="field field-disabled">
                        <div class="field-label">Email</div>
                        <div class="input-card editable">
                            <div class="value">i***@agptechnology.com</div>
                        </div>
                    </div>
                    <div class="field">
                        <div class="field-label">Mobile number</div>
                        <div class="input-card editable">
                            <div class="value">******5678</div>
                            <button class="icon-btn" aria-label="Edit mobile"><img src="assets/icon_pencil.svg" width="20" height="20" alt="edit"></button>
                        </div>
                    </div>
                </div>

                <div class="divider"></div>

                <h3 class="section-heading mb-32">Security</h3>
                <div class="grid-2">
                    <div class="field">
                        <div class="field-label">Password</div>
                        <div class="input-card editable">
                            <div class="value">************</div>
                            <button class="icon-btn" aria-label="Edit password"><img src="assets/icon_pencil.svg" width="20" height="20" alt="edit"></button>
                        </div>
                    </div>
                    <div class="field">
                        <div class="field-label">Authenticator app</div>
                        <div class="input-card input-card-split">
                            <div class="auth-row">
                                <span class="auth-state enabled">Enabled</span>
                            </div>
                            <label class="switch" aria-label="Toggle authenticator">
                                <input type="checkbox" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>
                </div>

                <div class="divider"></div>

                <h3 class="section-heading mb-32">Preferred currency</h3>
                <div class="field field-disabled">
                    <div class="field-label">Currency</div>
                    <div class="input-card">
                        <div class="market-currency"><img src="assets/icon_USD.svg" width="20" height="20" alt="USD"> <div class="currency-label"><span class="cl-primary value">USD</span><span class="cl-secondary value">(US Dollar)</span></div></div>
                    </div>
                </div>

                <div class="logout-row">
                    <a href="login.html">
                    <button class="btn btn-secondary btn-lg btn-block">Log out</button>
                </a>
                </div>
            </div>

            <div id="panel-intro" role="tabpanel" aria-labelledby="tab-intro" class="feature-wrapper">
                <div class="intro-slider swiper">
                    <div class="swiper-wrapper">
                        <div class="swiper-slide">
                            <div class="intro-slide-media" role="img" aria-label="Feature image 1">
                                <img class="intro-slide-img" src="assets/intro-1.jpg" alt="Intro slide 1">
                            </div>
                        </div>
                        <div class="swiper-slide">
                            <div class="intro-slide-media" role="img" aria-label="Feature image 2">
                                <img class="intro-slide-img" src="assets/intro-2.jpg" alt="Intro slide 2">
                            </div>
                        </div>
                        <div class="swiper-slide">
                            <div class="intro-slide-media" role="img" aria-label="Feature image 3">
                                <img class="intro-slide-img" src="assets/intro-3.jpg" alt="Intro slide 3">
                            </div>
                        </div>
                        <div class="swiper-slide">
                            <div class="intro-slide-media" role="img" aria-label="Feature image 4">
                                <img class="intro-slide-img" src="assets/intro-4.jpg" alt="Intro slide 4">
                            </div>
                        </div>
                    </div>
                    <div class="swiper-button-prev" aria-label="Previous slide"></div>
                    <div class="swiper-button-next" aria-label="Next slide"></div>
                    <div class="swiper-pagination"></div>
                </div>

                    <div class="intro-content">
                    <h2 class="intro-title-part1">Access XREX Pay features directly from Telegram</h2>
                    <h3 class="intro-title-part2">Link your XREX Pay account with Telegram to check wallet ownership and risk levels. More features coming soon!</h3>
                  
                    <div class="intro-info-banner" id="introInfoBanner">
                        <div class="iib-left">
                            <div class="iib-title-line">
                                <img class="iib-icon" src="assets/icon_info.svg" width="16" height="16" alt="info">
                                <div class="iib-title">Security notice</div>
                            </div>
                            <div class="iib-desc">
                                <span class="iib-req iib-line-marginbottom" id="iibReq">
                                    • Two-Factor Authentication must be enabled to use this feature,
                                    <a href="#" class="iib-link" id="iibSetup2faBtn">learn more</a>
                                </span>
                                <span class="iib-line">
                                    • Always make sure you’re interacting with our verified Telegram bot <strong>@SanneXREX_bot</strong>
                                </span>
                            </div>
                        </div>
                    </div>

                    <div class="intro-section">
                        <div class="intro-section-title">Features</div>
                        <div class="intro-item">
                            <div class="intro-icon"><img src="assets/icon_tgbot_checkwallet.svg" width="24" height="24" alt=""></div>
                            <div class="intro-subtitle">Check wallet address</div>
                            <p class="intro-paragraph">View ownership and risk insights for any Bitcoin, Ethereum and Tron blockchain addresses</p>
                        </div>
                        <div class="intro-item disabled">
                            <div class="intro-icon"><img src="assets/icon_tgbot_ordertracking.svg" width="24" height="24" alt=""></div>
                            <div class="intro-subtitle">Track OTC <span class="muted">(Coming soon)</span></div>
                            <p class="intro-paragraph">Manage and monitor your orders directly in Telegram</p>
                        </div>
                        <div class="intro-item disabled">
                            <div class="intro-icon"><img src="assets/icon_tgbot_notifications.svg" width="24" height="24" alt=""></div>
                            <div class="intro-subtitle">News Feed <span class="muted">(Coming soon)</span></div>
                            <p class="intro-paragraph">Get key updates and announcements directly in Telegram</p>
                        </div>
                    </div>

                    <div class="intro-divider"></div>

                    <div class="intro-section">
                        <div class="intro-section-title">How to use this Telegram Bot</div>
                        <div class="intro-item">
                            <div class="intro-icon"><img src="assets/icon_tgbot_linkaccount.svg" width="24" height="24" alt=""></div>
                            <div class="intro-subtitle">Link your account</div>
                            <p class="intro-paragraph">Start by linking your Telegram account with your XREX Web App for secure access to features</p>
                        </div>
                        <div class="intro-item">
                            <div class="intro-icon"><img src="assets/icon_tgbot_checkwallet.svg" width="24" height="24" alt=""></div>
                            <div class="intro-subtitle">Check wallet</div>
                            <p class="intro-paragraph">Enter <span class="cmd">/check_wallet</span> and paste one or more blockchain wallet addresses to see their exchange affiliation, on-chain balances, and risk level. Supports Bitcoin, Ethereum, and Tron. Check up to 10 addresses at once by separating them with commas.</p></div>
                        <!-- <div class="intro-item">
                            <div class="intro-icon"><img src="assets/icon_tgbot_otctrading.svg" width="24" height="24" alt=""></div>
                            <div class="intro-subtitle">OTC trading</div>
                            <p class="intro-paragraph">Request real-time OTC quotes using <span class="cmd">/otc_quote</span> and track orders with <span class="cmd">/otc_orders</span></p>
                        </div> -->
                        <div class="intro-item">
                            <div class="intro-icon"><img src="assets/icon_tgbot_livesupport.svg" width="24" height="24" alt=""></div>
                            <div class="intro-subtitle">Help</div>
                            <p class="intro-paragraph">Simply use the <span class="cmd">/help</span> command</p>
                        </div>
                    </div>

                    <div class="intro-divider"></div>

                    <div class="intro-section intro-cta">
                        <div class="intro-section-title">Ready to get started with the XREX Pay Telegram Bot?</div>
                        <div class="intro-cta-buttons">
                            <button class="btn btn-primary btn-md mobile-btn-sm js-start-link">Link now</button>
                        </div>
                    </div>

                    <div class="intro-footnote">By using the XREX Pay Telegram Bot, you agree to our <a href="https://info.xrex.sg/doc" target="_blank" rel="noopener noreferrer" class="intro-footnote-link">Privacy Policy</a></div>
                </div>
            </div>

            <div id="panel-setup" role="tabpanel" aria-labelledby="tab-setup" class="feature-wrapper" style="display:none;">
                <div class="timeline">
                    <div class="timeline-main">
                        <ol class="timeline-steps">
                            <li class="step is-active">
                                <div class="step-row step-label">
                                    <div class="track-wrapper">
                                        <div class="track"></div>
                                    </div>
                                    <div class="content-wrapper"><div class="label">XREX Pay</div></div>
                                </div>
                                <div class="step-row step-title has-node">
                                    <div class="track-wrapper">
                                        <div class="track"></div>
                                        <span class="node"></span>
                                        <div class="track"></div>
                                    </div>
                                    <div class="content-wrapper">
                                         <div class="title">Enable 2FA</div>
                                    </div>
                                </div>
                                <div class="step-row step-content">
                                    <div class="track-wrapper">
                                        <div class="track"></div>
                                    </div>
                                    <div class="content-wrapper">
                                        <div class="step-desc">
                                            <div class="desc">Two-factor authentication (2FA) is required</div>
                                        </div>
                                        <div class="step-footnote">By using the XREX Pay Telegram Bot, you agree to our <a href="https://info.xrex.sg/doc" target="_blank" rel="noopener noreferrer" class="step-footnote-link">Privacy Policy</a></div>
                                        <div class="step-actions">
                                            <button class="btn btn-primary btn-sm" id="btnEnable2FA">Enable 2FA</button>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li class="step is-muted" id="step-initiate-bot">
                                <div class="step-row step-label">
                                    <div class="track-wrapper"><div class="track"></div></div>
                                    <div class="content-wrapper"><div class="label">XREX Pay</div></div>
                                </div>
                                <div class="step-row step-title has-node">
                                    <div class="track-wrapper">
                                        <div class="track"></div>
                                        <span class="node"></span>
                                        <div class="track"></div>
                                    </div>
                                    <div class="content-wrapper"><div class="title">Launch Telegram Bot</div></div>
                                </div>
                                <div class="step-row step-content">
                                    <div class="track-wrapper"><div class="track"></div></div>
                                    <div class="content-wrapper">
                                        <div class="step-actions initiate-bot">
                                            <div class="ib-segment" role="tablist" aria-label="Open via">
                                                <button type="button" class="ib-tab is-active" data-pane="qr" role="tab" aria-selected="true">
                                                    <span class="ib-tab-icon ib-tab-qr" aria-hidden="true"></span>
                                                    <span>Scan QR</span>
                                                </button>
                                                <button type="button" class="ib-tab" data-pane="link" role="tab" aria-selected="false">
                                                    <span class="ib-tab-icon ib-tab-link" aria-hidden="true"></span>
                                                    <span>Open link</span>
                                                </button>
                                            </div>
                                            <div class="ib-pane ib-pane-qr is-active">
                                                <div class="ib-hint">Scan the QR code to launch the Telegram Bot on your mobile device<br />
                                                    <span class="ib-hint-sub ib-hint-sub-margintop">The bot will guide you through the next steps. </span><br />
                                                    <span class="ib-hint-sub">Want to use this device? Select "Open link"</span>
                                                </div>
                                                <div class="ib-qr-section">
                                                <div class="ib-qr"><img id="ibQr" src="assets/icon_link_tgqr.png" width="180" height="180" alt="QR" /></div>
                                                </div>
                                            </div>
                                            <div class="ib-pane ib-pane-link">
                                                <div class="ib-hint">Open the link below to launch the Telegram Bot on this device<br />
                                                    <span class="ib-hint-sub ib-hint-sub-margintop">The bot will guide you through the next steps. </span><br /> 
                                                    <span class="ib-hint-sub">Want to use another device? Select "Scan QR"</span>
                                                </div>
                                                <div class="ib-open-row">
                                                    <a id="ibLink" class="ib-pill" href="#" target="_blank" rel="noopener">
                                                        <span class="ib-pill-text">https://t.me/SanneXREX_bot?start=BOTC1583</span>
                                                        <img class="ib-pill-icon" src="assets/icon_link_openlink.svg" width="16" height="16" alt="" />
                                                    </a>
                                                    <button type="button" class="btn btn-secondary btn-sm ib-copy" id="ibCopyBtn">
                                                        <img src="assets/icon_link_copy.svg" width="16" height="16" alt="" />
                                                        <span>Copy link</span>
                                                    </button>
                                                </div>
                                            </div>
                                            <hr class="ib-divider" />
                                            <div class="ib-links">
                                                <a href="#" class="ib-link help-link">Need help?</a>
                                                <a href="#" class="ib-link abort-link">Cancel</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li class="step is-muted">
                                <div class="step-row step-label">
                                    <div class="track-wrapper"><div class="track"></div></div>
                                    <div class="content-wrapper"><div class="label">Telegram</div></div>
                                </div>
                                <div class="step-row step-title has-node">
                                    <div class="track-wrapper">
                                        <div class="track"></div>
                                        <span class="node"></span>
                                        <div class="track"></div>
                                    </div>
                                    <div class="content-wrapper"><div class="title">Authenticate with 2FA</div></div>
                                </div>
                            </li>
                            <li class="step is-muted" id="step-verify-code">
                                <div class="step-row step-label">
                                    <div class="track-wrapper"><div class="track"></div></div>
                                    <div class="content-wrapper"><div class="label">XREX Pay</div></div>
                                </div>
                                <div class="step-row step-title has-node">
                                    <div class="track-wrapper">
                                        <div class="track"></div>
                                        <span class="node"></span>
                                        <div class="track"></div>
                                    </div>
                                    <div class="content-wrapper"><div class="title">Enter code received from Bot</div></div>
                                </div>
                                <div class="step-row step-content">
                                    <div class="track-wrapper"><div class="track"></div></div>
                                    <div class="content-wrapper">
                                        <div class="step-actions verify-code">
                                            <div class="vc-label">Linking code</div>
                                            <div class="vc-row">
                                                <div class="vc-input-group">
                                                    <input id="vcCodeInput" class="vc-input" type="text" inputmode="text" placeholder="Enter code..." />
                                                    <button type="button" class="vc-clear" id="vcClearBtn" aria-label="Clear input">
                                                        <img src="assets/icon_close.svg" width="14" height="14" alt="" />
                                                    </button>
                                                    <button type="button" class="vc-submit" id="vcSubmitBtn">Submit</button>
                                                </div>
                                            </div>
                                            <div id="vcError" class="vc-error" hidden>Incorrect code. Please try again.</div>
                                            <hr class="ib-divider" />
                                            <div class="vc-links">
                                                <a id="vcBotLink" href="#" target="_blank" rel="noopener" class="ib-link">Go to bot</a>
                                                <a href="#" class="ib-link help-link">Need help?</a>
                                                <a href="#" class="ib-link abort-link">Cancel</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li class="step is-muted">
                                <div class="step-row step-label">
                                    <div class="track-wrapper"><div class="track"></div></div>
                                    <div class="content-wrapper"><div class="label">&nbsp;</div></div>
                                </div>
                                <div class="step-row step-title has-node">
                                    <div class="track-wrapper">
                                        <div class="track"></div>
                                        <span class="node"></span>
                                        <div class="track"></div>
                                    </div>
                                    <div class="content-wrapper"><div class="title">Linked successfully</div></div>
                                </div>
                            </li>
                        </ol>
                    </div>
                    <aside class="timeline-aside">
                        <div class="aside-box aside-box--success">
                            <img src="assets/img_linked.svg" alt="Successfully linked" />
                        </div>
                    </aside>
                </div>
            </div>
        </section>
    </main>

    <!-- Simple Modal for Enable 2FA -->
    <div id="modal" class="modal" role="dialog" aria-modal="true" aria-hidden="true" hidden>
        <div class="modal-wrapper">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Two-factor authentication</h2>
                    <button class="modal-close" id="modalClose" aria-label="Close modal">
                        <img src="assets/icon_modal_close.svg" width="24" height="24" alt="close" />
                    </button>
                </div>
                <div class="modal-body">
                    <div class="m-step">
                        <div class="m-step-meta">Step1</div>
                        <div class="m-step-title">Copy and paste the security key in your authenticator app</div>
                        <div class="m-field-with-qr">
                            <div class="m-field">
                                <div class="m-field-group">
                                    <label class="m-label" for="secKeyInput">Security key</label>
                                    <div class="m-input-row" id="secKeyField" role="button" tabindex="0" aria-label="Copy security key">
                                        <input id="secKeyInput" class="m-input" type="text" readonly value="" />
                                        <button class="m-copy" id="copyKeyBtn" aria-label="Copy">
                                            <img src="assets/icon_modal_copy.svg" width="24" height="24" alt="copy" />
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="m-qr" aria-hidden="true">
                                <img src="assets/icon_modal_2faqr.png" width="72" height="72" alt="QR" />
                            </div>
                        </div>
                    </div>
                    <hr class="m-divider" />
                    <div class="m-step">
                        <div class="m-step-meta">Step2</div>
                        <div class="m-step-title">Come back to XREX Pay and verify your 6-digit code</div>
                        <div class="m-desc">Copy the 6‑digit code from your authenticator app and enter it below.</div>
                        <div class="m-field">
                            <div class="m-field-group">
                                <label class="m-label" for="authCodeInput">Authentication code</label>
                                <div class="m-input-row m-input-row--plain">
                                    <input id="authCodeInput" class="m-input" type="text" inputmode="numeric" autocomplete="one-time-code" placeholder="Enter the authentication code" maxlength="6" />
                                </div>
                            </div>
                            <div id="authCodeError" class="m-error" aria-live="polite" hidden>Incorrect authentication code</div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary btn-md" id="modalCancel">Cancel</button>
                    <button class="btn btn-primary btn-md" id="modalConfirm">Confirm</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Success Modal: 2FA enabled notice -->
    <div id="successModal" class="modal" role="dialog" aria-modal="true" aria-hidden="true" hidden>
        <div class="modal-wrapper">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Please log in again</h2>
                    <button class="modal-close" id="successClose" aria-label="Close modal">
                        <img src="assets/icon_modal_close.svg" width="24" height="24" alt="close" />
                    </button>
                </div>
                <div class="modal-body m-success">
                    <div class="m-success-icon" aria-hidden="true">
                        <img src="assets/illu_2faenabled.svg" width="160" height="160" alt="" />
                    </div>
                    <div class="m-success-title">Two-factor authentication enabled!</div>
                    <div class="m-success-desc">After enabling two-factor authentication, you must log in again to access your account.</div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary btn-md" id="successCta">Back to login</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Unlink Modal: confirm unlink with 2FA -->
    <div id="unlinkModal" class="modal" role="dialog" aria-modal="true" aria-hidden="true" hidden>
        <div class="modal-wrapper">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Unlink Telegram Bot</h2>
                    <button class="modal-close" id="unlinkClose" aria-label="Close modal">
                        <img src="assets/icon_modal_close.svg" width="24" height="24" alt="close" />
                    </button>
                </div>
                <div class="modal-body">
                    <div class="m-step">
                        <div class="m-step-title">Enter your authentication code to confirm unlinking</div>
                        <div class="m-desc">Copy the 6‑digit code from your authenticator app and enter it below.</div>
                        <div class="m-info"">
                            <span class="mi-icon" aria-hidden="true"></span>
                            <span>Unlinking your account will remove access to most XREX Pay Telegram Bot features</span>
                        </div>
                        <div class="m-field">
                            <div class="m-field-group">
                                <label class="m-label" for="unlinkCodeInput">Authentication code</label>
                                <div class="m-input-row">
                                    <input id="unlinkCodeInput" class="m-input" type="text" inputmode="numeric" autocomplete="one-time-code" placeholder="Enter the authentication code" maxlength="6" />
                                    <button id="unlinkClearBtn" class="m-clear" type="button" aria-label="Clear input">
                                        <img src="assets/icon_close.svg" width="14" height="14" alt="" />
                                    </button>
                                </div>
                            </div>
                            <div id="unlinkCodeError" class="m-error" aria-live="polite" hidden>Incorrect authentication code</div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary btn-md" id="unlinkCancel">Cancel</button>
                    <button class="btn btn-primary btn-md" id="unlinkConfirm">Unlink</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Help Modal -->
    <div id="helpModal" class="modal" role="dialog" aria-modal="true" aria-hidden="true" hidden>
        <div class="modal-wrapper">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Need help?</h2>
                    <button class="modal-close" id="helpClose" aria-label="Close modal">
                        <img src="assets/icon_modal_close.svg" width="24" height="24" alt="close" />
                    </button>
                </div>
                <div class="modal-body">
                    <div class="m-step help-intro">
                        <div class="m-step-title">Visit our Help Center, or contact our Customer Support team</div>
                    </div>
                    <div class="help-cards">
                        <a href="https://intercom.help/xrex-sg/en/?q=TelegramBot" target="_blank" rel="noopener noreferrer" class="help-card" id="helpCenterCard" role="button" aria-label="Open Help center">
                            <div class="hc-icon"><img src="assets/icon_help_guide.svg" width="28" height="28" alt="" /></div>
                            <div class="hc-texts">
                                <div class="hc-title">Help center</div>
                                <div class="hc-desc">Browse FAQs, guides, and troubleshooting</div>
                            </div>
                            <div class="hc-chevron" aria-hidden="true"></div>
                        </a>
                        <a href="#" class="help-card" id="liveSupportCard" role="button" aria-label="Open Live support">
                            <div class="hc-icon"><img src="assets/icon_help_live.svg" width="28" height="28" alt="" /></div>
                            <div class="hc-texts">
                                <div class="hc-title">Contact Support</div>
                                <div class="hc-desc">Chat with our team for real-time help</div>
                                <div class="hc-sub"><img src="assets/icon_help_livetime.svg" width="14" height="14" alt="" /> <span>A few hours</span></div>
                            </div>
                            <div class="hc-chevron" aria-hidden="true"></div>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Go To Bot Modal -->
    <div id="goToBotModal" class="modal" role="dialog" aria-modal="true" aria-hidden="true" hidden>
        <div class="modal-wrapper">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Go to Telegram Bot</h2>
                    <button class="modal-close" id="gtbClose" aria-label="Close modal">
                        <img src="assets/icon_modal_close.svg" width="24" height="24" alt="close" />
                    </button>
                </div>
                <div class="modal-body">
                    <div class="m-step-title">Choose how to continue</div>
                    <div class="step-actions initiate-bot" id="gtbControls" role="group" aria-label="Open via">
                        <div class="ib-segment" role="tablist">
                            <button type="button" class="ib-tab" data-pane="qr" role="tab" aria-selected="false">
                                <span class="ib-tab-icon ib-tab-qr" aria-hidden="true"></span>
                                <span>Scan QR</span>
                            </button>
                            <button type="button" class="ib-tab" data-pane="link" role="tab" aria-selected="false">
                                <span class="ib-tab-icon ib-tab-link" aria-hidden="true"></span>
                                <span>Open link</span>
                            </button>
                        </div>
                        <div class="ib-pane ib-pane-qr">
                            <div class="ib-hint">
                                Scan the QR code to go to the Telegram Bot on your mobile device<br />
                                <span class="ib-hint-sub ib-hint-sub-margintop">Want to use this device? Select “Open Link.”</span>
                            </div>
                            <div class="ib-qr-section">
                                <div class="ib-qr"><img id="gtbQr" src="assets/icon_link_tgqr.png" width="180" height="180" alt="QR" /></div>
                            </div>
                        </div>
                        <div class="ib-pane ib-pane-link">
                            <div class="ib-hint">
                                Open the link below to go to the Telegram Bot on this device<br />
                                <span class="ib-hint-sub ib-hint-sub-margintop">Want to use another device? Select “Scan QR”</a>
                            </div>
                            <div class="ib-open-row">
                                <a id="gtbLink" class="ib-pill" href="#" target="_blank" rel="noopener">
                                    <span class="ib-pill-text">https://t.me/SanneXREX_bot</span>
                                    <img class="ib-pill-icon" src="assets/icon_link_openlink.svg" width="16" height="16" alt="" />
                                </a>
                                <button type="button" class="btn btn-secondary btn-sm ib-copy" id="gtbCopyBtn">
                                    <img src="assets/icon_link_copy.svg" width="16" height="16" alt="" />
                                    <span>Copy link</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary btn-md" id="gtbDone">Done</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Abort Modal -->
    <div id="abortModal" class="modal" role="dialog" aria-modal="true" aria-hidden="true" hidden>
        <div class="modal-wrapper modal-wrapper--small">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Cancel</h2>
                    <button class="modal-close" id="abortClose" aria-label="Close modal">
                        <img src="assets/icon_modal_close.svg" width="24" height="24" alt="close" />
                    </button>
                </div>
                <div class="modal-body">
                    <div class="m-step">
                        <div class="m-step-title">Do you want to cancel the Telegram Bot linking process?</div>
                        <div class="m-desc">Your Telegram account won’t be connected to XREX Pay if you cancel now.</div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary btn-md" id="abortCancel">No, continue</button>
                    <button class="btn btn-negative btn-md" id="abortConfirm">Yes, cancel</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Modal (state 5 transition) -->
    <div id="loadingModal" class="modal modal-loading" role="dialog" aria-modal="true" aria-hidden="true" hidden>
        <div class="modal-wrapper">
            <div class="modal-content">
                <div class="loading-spinner" aria-live="polite" aria-label="Loading"></div>
            </div>
        </div>
    </div>

    <footer class="app-footer">
        <div class="footer-inner">
            <div class="footer-copy">© XREX Pay Limited 2025</div>
            <div class="footer-links">
                <a href="https://intercom.help/xrex-sg/en/" target="_blank" rel="noopener noreferrer">Support</a>
                <a href="https://info.xrex.sg/doc" target="_blank" rel="noopener noreferrer">Terms of Use</a>
                <a href="https://info.xrex.sg/doc" target="_blank" rel="noopener noreferrer">Privacy Policy</a>
            </div>
        </div>

    <!-- Small Prompt Modal: Require 2FA before accessing Setup at state 1 -->
    <div id="require2faModal" class="modal" role="dialog" aria-modal="true" aria-hidden="true" hidden>
        <div class="modal-wrapper">
            <div class="modal-content">
                <div class="modal-header require2fa-header">
                    <h2>Two-factor authentication</h2>
                    <button class="modal-close" id="require2faClose" aria-label="Close modal">
                        <img src="assets/icon_modal_close.svg" width="24" height="24" alt="close" />
                    </button>
                </div>
                <div class="modal-body m-require flex-start">
                    <div class="m-step-title">Before you can start linking, you need to add an extra layer of security</div>

                    <div class="m-steps-label">Follow these steps</div>

                    <div class="m-steps-wrap">
                        <div class="m-steps">
                        <div class="m-srow is-active">
                            <div class="m-rail">
                                <span class="m-track" aria-hidden="true"></span>
                                <span class="m-node-wrap is-active" aria-hidden="true"><span class="m-node"></span></span>
                                <span class="m-track" aria-hidden="true"></span>
                            </div>
                            <div class="m-slabel">Set up Two-factor authentication (2FA)<div class="m-sublabel">Once completed, you'll be logged out</div></div>
                        </div>
                        <div class="m-srow is-muted">
                            <div class="m-rail">
                                <span class="m-track" aria-hidden="true"></span>
                                <span class="m-node-wrap" aria-hidden="true"><img src="assets/icon_2farequired_login.svg" width="20" height="20" alt="" /></span>
                                <span class="m-track" aria-hidden="true"></span>
                            </div>
                            <div class="m-slabel">Log back into XREX<div class="m-sublabel">You’ll be asked to provide your 2FA</div></div>
                        </div>
                        <div class="m-srow is-muted">
                            <div class="m-rail">
                                <span class="m-track" aria-hidden="true"></span>
                                <span class="m-node-wrap" aria-hidden="true"><img src="assets/icon_2farequired_link.svg" width="20" height="20" alt="" /></span>
                                <span class="m-track" aria-hidden="true"></span>
                            </div>
                            <div class="m-slabel">Start linking Telegram<div class="m-sublabel">Navigate back to this page and press "Link now"</div></div>
                        </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary btn-md" id="require2faCancel">Not now</button>
                    <button class="btn btn-primary btn-md" id="require2faConfirm">Set up 2FA</button>
                </div>
            </div>
        </div>
    </div>
    </footer>

    <div id="snackbar" class="snackbar" role="status" aria-live="polite" aria-hidden="true" hidden>
        <img class="snackbar-icon" src="assets/icon_snackbar_success.svg" alt="success" width="20" height="20">
        <span class="snackbar-text">Page link copied to clipboard</span>
    </div>

    <script>
      window.XREX_SYNC_URL = 'https://xrextgbot.vercel.app/api/state';
    </script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcode-generator@1.4.4/qrcode.min.js"></script>
    <script src="js/settings.js"></script>
</body>
</html>



